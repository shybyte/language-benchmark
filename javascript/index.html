<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello JS</title>
</head>
<body>

<button id="runButton">Run JS</button>

<script type="module">
  const MAX_AUTHORS = 10_000;

  export function createLines(length) {
    const lines = new Uint16Array(length);
    for (let i = 0; i < length; i++) {
      lines[i] = i % MAX_AUTHORS;
    }
    return lines;
  }

  export function main() {
    const lines = createLines(250_000 * 1000);

    const linesByAuthor = new Uint32Array(MAX_AUTHORS);
    console.time();
    let n = lines.length;
    for (let i = 0; i < n; i++) {
      linesByAuthor[lines[i]] += 1;
    }
    console.timeEnd();
  }

  for (let i = 0; i < 1; i++) {
    main();
  }

  document.getElementById("runButton").addEventListener("click", () => {
    main();
  });


</script>

</body>
</html>
